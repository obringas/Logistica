(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{1654:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var o=a(5155),s=a(2115),r=a(6268),l=a(1032);function n(e){let{columns:t,data:a,loading:n=!1,multipleSelection:i=!1,onRowClick:c,onSelectionChange:d}=e,[u,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{d&&d(u)},[u,d]);let x=t.map(e=>({accessorKey:e.key,header:()=>(0,o.jsx)("span",{className:"font-bold",children:e.label}),cell:t=>{let a=t.getValue();if("numeric"===e.type)return(0,o.jsx)("span",{className:"text-right",children:Number(a).toLocaleString()});if("date"===e.type){let e=a instanceof Date?a:new Date(String(a));return(0,o.jsx)("span",{children:isNaN(e.getTime())?"Fecha inv\xe1lida":e.toLocaleDateString()})}return"currency"===e.type?(0,o.jsxs)("span",{className:"text-right",children:["$",Number(a).toFixed(2)]}):"buttons"===e.type&&e.buttons?(0,o.jsx)("div",{className:"flex gap-2",children:e.buttons.map((e,a)=>(0,o.jsx)("button",{className:"p-1 px-3 rounded text-white ".concat(e.color),onClick:()=>e.action(t.row.index),children:e.label},a))}):(0,o.jsx)("span",{children:"string"==typeof a||"number"==typeof a?a:JSON.stringify(a)})}})),h=(0,r.N4)({columns:x,data:a,getCoreRowModel:(0,l.HT)(),getPaginationRowModel:(0,l.kW)()});return(0,o.jsxs)("div",{className:"p-4 border rounded-md shadow bg-white",children:[n?(0,o.jsx)("p",{className:"text-center text-gray-500",children:"Cargando datos..."}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full min-w-max border-collapse border border-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-100",children:h.getHeaderGroups().map(e=>(0,o.jsxs)("tr",{children:[i&&(0,o.jsx)("th",{className:"p-2 border"}),e.headers.map(e=>(0,o.jsx)("th",{className:"p-2 border",children:(0,r.Kv)(e.column.columnDef.header,e.getContext())},e.id))]},e.id))}),(0,o.jsx)("tbody",{children:h.getRowModel().rows.map(e=>(0,o.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-100 ".concat(u.includes(e.original)?"bg-blue-200":""),onClick:()=>{c&&c(e.original),i?p(t=>t.includes(e.original)?t.filter(t=>t!==e.original):[...t,e.original]):p([e.original])},children:[i&&(0,o.jsx)("td",{className:"p-2 border text-center",children:(0,o.jsx)("input",{type:"checkbox",checked:u.includes(e.original),onChange:()=>{}})}),e.getVisibleCells().map(e=>(0,o.jsx)("td",{className:"p-2 border",children:(0,r.Kv)(e.column.columnDef.cell,e.getContext())},e.id))]},e.id))})]})}),(0,o.jsxs)("div",{className:"mt-2 flex justify-between",children:[(0,o.jsx)("button",{className:"p-2 bg-gray-300 rounded",onClick:()=>h.previousPage(),disabled:!h.getCanPreviousPage(),children:"Anterior"}),(0,o.jsxs)("span",{children:["P\xe1gina ",h.getState().pagination.pageIndex+1]}),(0,o.jsx)("button",{className:"p-2 bg-gray-300 rounded",onClick:()=>h.nextPage(),disabled:!h.getCanNextPage(),children:"Siguiente"})]})]})}},2383:()=>{},2627:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(5155),s=a(2115),r=a(5802),l=a(1654);function n(e){let{datos:t}=e;return(0,o.jsxs)("div",{className:"p-4 border rounded-md shadow bg-white",children:[(0,o.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Liquidaciones por Socio"}),t.length>0?(0,o.jsx)(l.A,{columns:[{label:"FET",key:"fet",type:"text"},{label:"Socio",key:"socio",type:"text"},{label:"Nombre",key:"nombre",type:"text"},{label:"Fecha",key:"fecha",type:"date"},{label:"Puerta",key:"puerta",type:"text"},{label:"Romaneo",key:"romaneo",type:"text"},{label:"Formulario",key:"formulario",type:"text"},{label:"Liquidaci\xf3n",key:"liquidacion",type:"text"},{label:"Kilos",key:"kilos",type:"numeric"},{label:"Bruto",key:"bruto",type:"currency"},{label:"C\xf3digo Campa\xf1a",key:"codigo_Camp",type:"text"}],data:t}):(0,o.jsx)("p",{className:"text-gray-500",children:"No hay datos disponibles."})]})}var i=a(6907),c=a(3925);function d(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),p=async e=>{l(!0),u("");try{let a=await (0,i.W)(e.camp,e.socio?Number(e.socio):null,e.fet);t(a)}catch(e){u("Error al obtener los datos.")}l(!1)};return(0,o.jsxs)("div",{className:"container mx-auto mt-4 p-4",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Liquidaciones por Socio"}),(0,o.jsx)(r.A,{onBuscar:p}),a&&(0,o.jsx)("p",{className:"text-blue-500",children:"Cargando datos..."}),d&&(0,o.jsx)("p",{className:"text-red-500",children:d}),!a&&e.length>0&&(0,o.jsxs)("p",{className:"text-green-500",children:["Se encontraron ",e.length," registros."]}),!a&&0===e.length&&(0,o.jsx)("p",{className:"text-yellow-500",children:"No hay datos para mostrar."}),e.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{if(0===e.length){alert("No hay datos para exportar");return}let t=c.Wp.json_to_sheet(e),a=c.Wp.book_new();c.Wp.book_append_sheet(a,t,"Liquidaciones"),c._h(a,"Liquidaciones_Por_Socio.xlsx")},className:"bg-green-500 text-white p-2 rounded mb-4",children:"\uD83D\uDCE5 Exportar a Excel"}),(0,o.jsx)(n,{datos:e})]})]})}},3686:()=>{},5802:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var o=a(5155),s=a(2115),r=a(9911);function l(e){let{onBuscar:t}=e,[a,l]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[c,d]=(0,s.useState)("");return(0,o.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,o.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Buscar por Socio"}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({camp:a,socio:n,fet:c})},className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"text",placeholder:"Campa\xf1a",className:"p-2 border rounded flex-1",value:a,onChange:e=>l(e.target.value)}),(0,o.jsx)("input",{type:"text",placeholder:"N\xfamero de Socio",className:"p-2 border rounded flex-1",value:n,onChange:e=>i(e.target.value)}),(0,o.jsx)("input",{type:"text",placeholder:"N\xfamero FET",className:"p-2 border rounded flex-1",value:c,onChange:e=>d(e.target.value)}),(0,o.jsxs)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded flex items-center",children:[(0,o.jsx)(r.KSO,{className:"mr-2"})," Buscar"]})]})]})}},6907:(e,t,a)=>{"use strict";a.d(t,{N:()=>r,W:()=>s});let o="http://coop_serv8/WebApiInformes/api";async function s(e,t,a){let s={Campañas:e,NroSocio:t,NroFet:a};console.log("Datos enviados:",s);try{let e=await fetch("".concat(o,"/reportes/liquidaciones"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Respuesta recibida:",e),!e.ok)throw Error("Error en la solicitud: ".concat(e.statusText));let t=await e.json();return console.log("Datos de la respuesta:",t),t}catch(e){throw console.error("Error al obtener las Liquidaciones:",e),e}}async function r(e,t,a){let s={Campañas:e,NroSocio:t,NroFet:a};console.log("Datos enviados:",s);try{let e=await fetch("".concat(o,"/Entrega/por-productor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Respuesta recibida:",e),!e.ok)throw Error("Error en la solicitud: ".concat(e.statusText));let t=await e.json();return console.log("Datos de la respuesta:",t),t}catch(e){throw console.error("Error al obtener las Liquidaciones:",e),e}}},7033:(e,t,a)=>{Promise.resolve().then(a.bind(a,2627))}},e=>{var t=t=>e(e.s=t);e.O(0,[524,711,325,441,684,358],()=>t(7033)),_N_E=e.O()}]);