(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{1654:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(5155),n=l(2115),o=l(6268),r=l(1032);function i(e){let{columns:t,data:l,loading:i=!1,multipleSelection:c=!1,onRowClick:s,onSelectionChange:u}=e,[d,p]=(0,n.useState)([]);(0,n.useEffect)(()=>{u&&u(d)},[d,u]);let b=t.map(e=>({accessorKey:e.key,header:()=>(0,a.jsx)("span",{className:"font-bold",children:e.label}),cell:t=>{let l=t.getValue();if("numeric"===e.type)return(0,a.jsx)("span",{className:"text-right",children:Number(l).toLocaleString()});if("date"===e.type){let e=l instanceof Date?l:new Date(String(l));return(0,a.jsx)("span",{children:isNaN(e.getTime())?"Fecha inv\xe1lida":e.toLocaleDateString()})}return"currency"===e.type?(0,a.jsxs)("span",{className:"text-right",children:["$",Number(l).toFixed(2)]}):"buttons"===e.type&&e.buttons?(0,a.jsx)("div",{className:"flex gap-2",children:e.buttons.map((e,l)=>(0,a.jsx)("button",{className:"p-1 px-3 rounded text-white ".concat(e.color),onClick:()=>e.action(t.row.index),children:e.label},l))}):(0,a.jsx)("span",{children:"string"==typeof l||"number"==typeof l?l:JSON.stringify(l)})}})),m=(0,o.N4)({columns:b,data:l,getCoreRowModel:(0,r.HT)(),getPaginationRowModel:(0,r.kW)()});return(0,a.jsxs)("div",{className:"p-4 border rounded-md shadow bg-white",children:[i?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Cargando datos..."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-max border-collapse border border-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:m.getHeaderGroups().map(e=>(0,a.jsxs)("tr",{children:[c&&(0,a.jsx)("th",{className:"p-2 border"}),e.headers.map(e=>(0,a.jsx)("th",{className:"p-2 border",children:(0,o.Kv)(e.column.columnDef.header,e.getContext())},e.id))]},e.id))}),(0,a.jsx)("tbody",{children:m.getRowModel().rows.map(e=>(0,a.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-100 ".concat(d.includes(e.original)?"bg-blue-200":""),onClick:()=>{s&&s(e.original),c?p(t=>t.includes(e.original)?t.filter(t=>t!==e.original):[...t,e.original]):p([e.original])},children:[c&&(0,a.jsx)("td",{className:"p-2 border text-center",children:(0,a.jsx)("input",{type:"checkbox",checked:d.includes(e.original),onChange:()=>{}})}),e.getVisibleCells().map(e=>(0,a.jsx)("td",{className:"p-2 border",children:(0,o.Kv)(e.column.columnDef.cell,e.getContext())},e.id))]},e.id))})]})}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between",children:[(0,a.jsx)("button",{className:"p-2 bg-gray-300 rounded",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:"Anterior"}),(0,a.jsxs)("span",{children:["P\xe1gina ",m.getState().pagination.pageIndex+1]}),(0,a.jsx)("button",{className:"p-2 bg-gray-300 rounded",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:"Siguiente"})]})]})}},2383:()=>{},3686:()=>{},3973:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>y});var a=l(5155),n=l(2115),o=l(5802),r=l(1654);function i(e){let{datos:t}=e;return(0,a.jsxs)("div",{className:"p-4 border rounded-md shadow bg-white",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Entregas por Socio"}),t.length>0?(0,a.jsx)(r.A,{columns:[{label:"Socio",key:"socio",type:"numeric"},{label:"FET",key:"fet",type:"numeric"},{label:"C\xf3digo Campa\xf1a",key:"codigo_camp",type:"numeric"},{label:"Nombre",key:"nombre",type:"text"},{label:"Formulario",key:"formulario",type:"text"},{label:"Puerta",key:"puerta",type:"numeric"},{label:"Romaneo",key:"romaneo",type:"numeric"},{label:"Liquidaci\xf3n",key:"liquidacion",type:"numeric"},{label:"CUIT",key:"cuit",type:"text"},{label:"Fecha",key:"fecha",type:"date"},{label:"Total Kilos",key:"totalKilos",type:"numeric"},{label:"Importe Total",key:"importeTotal",type:"currency"},{label:"x1L",key:"x1L",type:"numeric"},{label:"x2L",key:"x2L",type:"numeric"},{label:"x3L",key:"x3L",type:"numeric"},{label:"x4L",key:"x4L",type:"numeric"},{label:"x1F",key:"x1F",type:"numeric"},{label:"x2F",key:"x2F",type:"numeric"},{label:"x3F",key:"x3F",type:"numeric"},{label:"x4F",key:"x4F",type:"numeric"},{label:"x2K",key:"x2K",type:"numeric"},{label:"x3K",key:"x3K",type:"numeric"},{label:"n5X",key:"n5X",type:"numeric"},{label:"nvx",key:"nvx",type:"numeric"},{label:"c1L",key:"c1L",type:"numeric"},{label:"c2L",key:"c2L",type:"numeric"},{label:"c3L",key:"c3L",type:"numeric"},{label:"c4L",key:"c4L",type:"numeric"},{label:"c1F",key:"c1F",type:"numeric"},{label:"c2F",key:"c2F",type:"numeric"},{label:"c3F",key:"c3F",type:"numeric"},{label:"c4F",key:"c4F",type:"numeric"},{label:"c2K",key:"c2K",type:"numeric"},{label:"c3K",key:"c3K",type:"numeric"},{label:"n5C",key:"n5C",type:"numeric"},{label:"nvc",key:"nvc",type:"numeric"},{label:"b1L",key:"b1L",type:"numeric"},{label:"b2L",key:"b2L",type:"numeric"},{label:"b3L",key:"b3L",type:"numeric"},{label:"b4L",key:"b4L",type:"numeric"},{label:"b1F",key:"b1F",type:"numeric"},{label:"b2F",key:"b2F",type:"numeric"},{label:"b3F",key:"b3F",type:"numeric"},{label:"b4F",key:"b4F",type:"numeric"},{label:"b2KL",key:"b2KL",type:"numeric"},{label:"b3KL",key:"b3KL",type:"numeric"},{label:"b2KF",key:"b2KF",type:"numeric"},{label:"b3KF",key:"b3KF",type:"numeric"},{label:"n5B",key:"n5B",type:"numeric"},{label:"nvb",key:"nvb",type:"numeric"},{label:"t1L",key:"t1L",type:"numeric"},{label:"t2L",key:"t2L",type:"numeric"},{label:"t1F",key:"t1F",type:"numeric"},{label:"t2F",key:"t2F",type:"numeric"},{label:"t2KL",key:"t2KL",type:"numeric"},{label:"t2KF",key:"t2KF",type:"numeric"},{label:"n5K",key:"n5K",type:"numeric"},{label:"h1F",key:"h1F",type:"numeric"},{label:"h2F",key:"h2F",type:"numeric"},{label:"h3F",key:"h3F",type:"numeric"}],data:t}):(0,a.jsx)("p",{className:"text-gray-500",children:"No hay datos disponibles."})]})}var c=l(6907),s=l(3925),u=l(853),d=l.n(u),p=l(7573);d().vfs=p.b.vfs;let b=async e=>{try{if(!e.length){alert("No hay datos para generar el PDF.");return}let t=async e=>{let t=await fetch(e),l=await t.blob();return new Promise((e,t)=>{let a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=t,a.readAsDataURL(l)})},l=await t("/StockLogistica/assets/images/logo.png"),{socio:a,fet:n,nombre:o,codigo_camp:r}=e[0],i=new Date().toLocaleDateString(),c=["fecha","romaneo","liquidacion","","","","","","","","","",""],s=["","","","x1L","x2L","x3L","x4L","x1F","x2F","x3F","x4F","x2K","x3K"],u=["","","","n5X","nvx","c1L","c2L","c3L","c4L","c1F","c2F","c3F","c4F"],p=["","","","c2K","c3K","n5C","nvc","b1L","b2L","b3L","b4L","b1F","b2F"],b=["","","","b3F","b4F","b2KL","b3KL","b2KF","b3KF","n5B","nvb","t1L","t2L"],m=["","","","t1F","t2F","t2KL","t2KF","n5K","h1F","h2F","h3F","",""],y=["","","","","","","","","","","","","Kilos"],x=["","","","","","","","","","","","","Importe"],h=[];h.push([{colSpan:c.length,style:"tableHeader",table:{widths:["auto","*","auto"],body:[[{image:l,width:20,alignment:"left"},{text:"COOPROTAB - COMPRA TABACO A PRODUCTORES",alignment:"center",fontSize:10,bold:!0},{text:"Fecha: ".concat(i),alignment:"right",fontSize:9}]]},layout:"noBorders"},...Array(c.length-1).fill({})]),h.push(c.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"center"}))),h.push(s.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"center"}))),h.push(u.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"center"}))),h.push(p.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"center"}))),h.push(b.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"center"}))),h.push(m.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"center"}))),h.push(y.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"right"}))),h.push(x.map(e=>({text:e.toUpperCase(),style:"tableHeader",alignment:"right"}))),h.push([{columns:[{text:"Cosecha ".concat(r),alignment:"left"},{text:"Productor: ".concat(a," - ").concat(o," | FET: ").concat(n)}],fontsize:10,bold:!0,alignment:"right",colSpan:c.length},...Array(c.length-1).fill({})]),e.forEach((e,t)=>{t%6==0&&0!==t&&h.push([{text:"",colSpan:c.length,pageBreak:"before",border:[!1,!1,!1,!1]}]);let l=(e,t)=>""===e?"":null!=t?t.toString():"0";h.push(c.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"center"}))),h.push(s.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"center"}))),h.push(u.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"center"}))),h.push(p.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"center"}))),h.push(b.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"center"}))),h.push(m.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"center"}))),h.push(y.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"right"}))),h.push(x.map(t=>({text:l(t,e[t]),style:"tableData",alignment:"right"})))});let g=e.reduce((e,t)=>{let l=Number(t.Kilos);return e+(isNaN(l)?0:l)},0),F=e.reduce((e,t)=>{let l=Number(t.Importe);return e+(isNaN(l)?0:l)},0),v={pageSize:"A4",pageMargins:[15,15,15,40],footer:(e,t)=>({margin:[15,0,15,10],columns:[{width:"*",stack:[{columns:[{image:l,width:20,alignment:"left",margin:[0,0,5,0]},{text:"Reporte generado por COOPROTAB",alignment:"left",fontSize:9,margin:[5,5,0,0]}]}]},{width:"auto",text:"P\xe1gina ".concat(e," de ").concat(t),alignment:"center",fontSize:9,margin:[0,5,0,0]}]}),content:[{text:"\n"},{table:{headerRows:10,widths:[...Array(c.length).fill("auto")],body:h},layout:"headerLineOnly",style:"tableData"},{text:"\n"},{text:"Total General Kilos: ".concat(g.toLocaleString()," KG"),style:"total",alignment:"right"},{text:"Importe Total: $".concat(F.toFixed(2)),style:"total",alignment:"right"}],styles:{header:{fontSize:12,bold:!0},subheader:{fontSize:10,bold:!0},tableHeader:{bold:!0,fontSize:9.5,fillColor:"#eeeeee",alignment:"center"},tableData:{fontSize:7,alignment:"center"}}};d().createPdf(v).download("Reporte_Entregas_".concat(a,".pdf"))}catch(e){console.error("Error al generar el PDF:",e),alert("Hubo un problema generando el PDF.")}};var m=l(9911);function y(){let[e,t]=(0,n.useState)(!1),[l,r]=(0,n.useState)([]),[u,d]=(0,n.useState)(!1),[p,y]=(0,n.useState)(""),x=async e=>{d(!0),y("");try{let t=await (0,c.N)(e.camp,e.socio?Number(e.socio):null,e.fet);r(t)}catch(e){y("Error al obtener los datos.")}d(!1)},h=e=>e.map(e=>{var t,l,a,n,o,r,i,c,s,u,d,p,b,m,y,x,h,g,F,v,L,f,k,N,K,j,w,C,S,D,E,P,T,O,_,A,R,B,H,U,z,I,q,W,M,X,G,J,V,$,Q,Y,Z,ee,et,el,ea,en,eo,er,ei,ec;return{socio:null!==(t=e.socio)&&void 0!==t?t:0,fet:null!==(l=e.fet)&&void 0!==l?l:0,codigo_camp:null!==(a=e.codigo_camp)&&void 0!==a?a:0,nombre:null!==(n=e.nombre)&&void 0!==n?n:"",formulario:null!==(o=e.formulario)&&void 0!==o?o:"",puerta:null!==(r=e.puerta)&&void 0!==r?r:0,romaneo:"".concat(null!==(i=e.puerta)&&void 0!==i?i:0,"-").concat(null!==(c=e.romaneo)&&void 0!==c?c:0),liquidacion:"".concat(null!==(s=e.formulario)&&void 0!==s?s:"","-").concat(null!==(u=e.liquidacion)&&void 0!==u?u:0),cuit:null!==(d=e.cuit)&&void 0!==d?d:"",fecha:e.fecha?new Date(e.fecha).toISOString().split("T")[0]:"",Kilos:null!==(p=e.totalKilos)&&void 0!==p?p:0,Importe:null!==(b=e.importeTotal)&&void 0!==b?b:0,x1L:null!==(m=e.x1L)&&void 0!==m?m:0,x2L:null!==(y=e.x2L)&&void 0!==y?y:0,x3L:null!==(x=e.x3L)&&void 0!==x?x:0,x4L:null!==(h=e.x4L)&&void 0!==h?h:0,x1F:null!==(g=e.x1F)&&void 0!==g?g:0,x2F:null!==(F=e.x2F)&&void 0!==F?F:0,x3F:null!==(v=e.x3F)&&void 0!==v?v:0,x4F:null!==(L=e.x4F)&&void 0!==L?L:0,x2K:null!==(f=e.x2K)&&void 0!==f?f:0,x3K:null!==(k=e.x3K)&&void 0!==k?k:0,n5X:null!==(N=e.n5X)&&void 0!==N?N:0,nvx:null!==(K=e.nvx)&&void 0!==K?K:0,c1L:null!==(j=e.c1L)&&void 0!==j?j:0,c2L:null!==(w=e.c2L)&&void 0!==w?w:0,c3L:null!==(C=e.c3L)&&void 0!==C?C:0,c4L:null!==(S=e.c4L)&&void 0!==S?S:0,c1F:null!==(D=e.c1F)&&void 0!==D?D:0,c2F:null!==(E=e.c2F)&&void 0!==E?E:0,c3F:null!==(P=e.c3F)&&void 0!==P?P:0,c4F:null!==(T=e.c4F)&&void 0!==T?T:0,c2K:null!==(O=e.c2K)&&void 0!==O?O:0,c3K:null!==(_=e.c3K)&&void 0!==_?_:0,n5C:null!==(A=e.n5C)&&void 0!==A?A:0,nvc:null!==(R=e.nvc)&&void 0!==R?R:0,b1L:null!==(B=e.b1L)&&void 0!==B?B:0,b2L:null!==(H=e.b2L)&&void 0!==H?H:0,b3L:null!==(U=e.b3L)&&void 0!==U?U:0,b4L:null!==(z=e.b4L)&&void 0!==z?z:0,b1F:null!==(I=e.b1F)&&void 0!==I?I:0,b2F:null!==(q=e.b2F)&&void 0!==q?q:0,b3F:null!==(W=e.b3F)&&void 0!==W?W:0,b4F:null!==(M=e.b4F)&&void 0!==M?M:0,b2KL:null!==(X=e.b2KL)&&void 0!==X?X:0,b3KL:null!==(G=e.b3KL)&&void 0!==G?G:0,b2KF:null!==(J=e.b2KF)&&void 0!==J?J:0,b3KF:null!==(V=e.b3KF)&&void 0!==V?V:0,n5B:null!==($=e.n5B)&&void 0!==$?$:0,nvb:null!==(Q=e.nvb)&&void 0!==Q?Q:0,t1L:null!==(Y=e.t1L)&&void 0!==Y?Y:0,t2L:null!==(Z=e.t2L)&&void 0!==Z?Z:0,t1F:null!==(ee=e.t1F)&&void 0!==ee?ee:0,t2F:null!==(et=e.t2F)&&void 0!==et?et:0,t2KL:null!==(el=e.t2KL)&&void 0!==el?el:0,t2KF:null!==(ea=e.t2KF)&&void 0!==ea?ea:0,n5K:null!==(en=e.n5K)&&void 0!==en?en:0,sss:null!==(eo=e.sss)&&void 0!==eo?eo:0,h1F:null!==(er=e.h1F)&&void 0!==er?er:0,h2F:null!==(ei=e.h2F)&&void 0!==ei?ei:0,h3F:null!==(ec=e.h3F)&&void 0!==ec?ec:0}});return(0,a.jsxs)("div",{className:"container mx-auto mt-4 p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Entregas por Socio"}),(0,a.jsx)(o.A,{onBuscar:x}),u&&(0,a.jsx)("p",{className:"text-blue-500",children:"Cargando datos..."}),p&&(0,a.jsx)("p",{className:"text-red-500",children:p}),!u&&l.length>0&&(0,a.jsxs)("p",{className:"text-green-500",children:["Se encontraron ",l.length," registros."]}),!u&&0===l.length&&(0,a.jsx)("p",{className:"text-yellow-500",children:"No hay datos para mostrar."}),l.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>{if(0===l.length){alert("No hay datos para exportar");return}let e=s.Wp.json_to_sheet(l),t=s.Wp.book_new();s.Wp.book_append_sheet(t,e,"Entregas"),s._h(t,"Entregas_Por_Socio.xlsx")},className:"bg-green-500 text-white p-2 rounded flex items-center gap-2",children:[(0,a.jsx)(m.Ru,{})," Exportar a Excel"]}),(0,a.jsxs)("button",{onClick:()=>{if(0===l.length){alert("No hay datos para exportar");return}b(h(l))},className:"bg-red-500 text-white p-2 rounded flex items-center gap-2",children:[(0,a.jsx)(m.kl1,{})," Exportar a PDF"]})]}),(0,a.jsx)(i,{datos:l})]})]})}},5802:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var a=l(5155),n=l(2115),o=l(9911);function r(e){let{onBuscar:t}=e,[l,r]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),[s,u]=(0,n.useState)("");return(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Buscar por Socio"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({camp:l,socio:i,fet:s})},className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Campa\xf1a",className:"p-2 border rounded flex-1",value:l,onChange:e=>r(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"N\xfamero de Socio",className:"p-2 border rounded flex-1",value:i,onChange:e=>c(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"N\xfamero FET",className:"p-2 border rounded flex-1",value:s,onChange:e=>u(e.target.value)}),(0,a.jsxs)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded flex items-center",children:[(0,a.jsx)(o.KSO,{className:"mr-2"})," Buscar"]})]})]})}},6907:(e,t,l)=>{"use strict";l.d(t,{N:()=>o,W:()=>n});let a="http://coop_serv8/WebApiInformes/api";async function n(e,t,l){let n={Campañas:e,NroSocio:t,NroFet:l};console.log("Datos enviados:",n);try{let e=await fetch("".concat(a,"/reportes/liquidaciones"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(console.log("Respuesta recibida:",e),!e.ok)throw Error("Error en la solicitud: ".concat(e.statusText));let t=await e.json();return console.log("Datos de la respuesta:",t),t}catch(e){throw console.error("Error al obtener las Liquidaciones:",e),e}}async function o(e,t,l){let n={Campañas:e,NroSocio:t,NroFet:l};console.log("Datos enviados:",n);try{let e=await fetch("".concat(a,"/Entrega/por-productor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(console.log("Respuesta recibida:",e),!e.ok)throw Error("Error en la solicitud: ".concat(e.statusText));let t=await e.json();return console.log("Datos de la respuesta:",t),t}catch(e){throw console.error("Error al obtener las Liquidaciones:",e),e}}},9966:(e,t,l)=>{Promise.resolve().then(l.bind(l,3973))}},e=>{var t=t=>e(e.s=t);e.O(0,[524,711,626,28,325,441,684,358],()=>t(9966)),_N_E=e.O()}]);